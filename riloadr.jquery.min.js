/*! 
 * Riloadr.js 1.1.0 (c) 2012 Tubal Martin - MIT license
 */
!function(a){typeof define=="function"&&define.amd?define(["jquery"],a):window.Riloadr=a(jQuery)}(function(a){function O(b){function bb(){L(z,m,E),L(z,n,F),G&&(N=z[v],L(z,y,H))}function cb(){M(z,m,E),M(z,n,F),G&&M(z,y,H)}function db(a,b){a[r]=c,a[q]=0,a[o]=eb,a[p]=fb,a.src=R(a,w,ab),Z.splice(b,1)}function eb(){var a=this;a[o]=a[p]=f,a[s]=a[s].replace(t,"$1$2"),o in b&&b[o][h](a)}function fb(){var a=this;O>0&&a[q]<O&&(a[q]++,a.src=R(a,w,ab,c)),p in b&&b[p][h](a)}var g=this,i=b.breakpoints||W('"breakpoints" not defined.'),j=b.name||"responsive",t=new RegExp("(^|\\s)"+j+"(\\s|$)"),w=b.base||k,x=b.defer&&(b.defer+k).toLowerCase()||d,C=x==="belowfold"&&!K,E=C&&T(function(){g[u]()},e),F=C&&U(function(){g[u]()},e),H=C&&U(function(){z[v]!==N&&(N=z[v],g[u]())},e),I=+b.foldDistance||100,O=+b[q]||0,Z=[],_,ab;g[u]=function(b){V(function(d,e){if(!Z[l]||b===c)C&&bb(),a("img."+j,_).each(function(a,b){b&&!b[r]&&Z.push(b)});if(Z[l]){e=0;while(d=Z[e])d&&!d[r]&&(C?S(d,I)||(db(d,e),e--):(db(d,e),e--)),e++}C&&!Z[l]&&cb(),d=f})},X(function(){A=a(z),D=B.body,_=b.root&&a("#"+b.root)||D,J=J||Q(),ab=P(i,J),!x||C?g[u]():Y(g[u])})}function P(a,b){var c=k,d=b,e=0,f,g,h,i,j;while(f=a[e]){g=f.name,h=f.minWidth,i=f.maxWidth,j=f.minDevicePixelRatio;if(b>0){if(h&&i&&b>=h&&b<=i||h&&!i&&b>=h||i&&!h&&b<=i)j?I>=j&&(c=g):c=g}else if(d<=0||h<d||i<d)d=h||i||d,c=g;e++}return c+k}function Q(){var a=Math,b=[C.clientWidth,C.offsetWidth,D.clientWidth],c=a.ceil(H/I),d=b[l],e=0,f;for(;e<d;e++)isNaN(b[e])&&(b.splice(e,1),e--);return b[l]&&(f=a.max[i](a,b),isNaN(c)||(f=a.min(c,f))),f||c||0}function R(a,b,c,d){var e=(a.getAttribute("data-base")||b)+(a.getAttribute("data-src")||k);return d&&(e+=(E.test(e)?"&":"?")+"riloadrts="+(new Date).getTime()),e.replace(F,c)}function S(b,c){return A.height()+A.scrollTop()<=a(b).offset().top-c}function T(a,b){function j(){h=new Date,g=f,a[i](e,c)}var c,d,e,g,h=0;return function(){var f=new Date,k=b-(f-h);return c=arguments,e=this,k<=0?(h=f,d=a[i](e,c)):g||(g=setTimeout(j,k)),d}}function U(a,b,c){function j(){h=f,c||a[i](g,d)}var d,e,g,h;return function(){var f=c&&!h;return d=arguments,g=this,clearTimeout(h),h=setTimeout(j,b),f&&(e=a[i](g,d)),e}}function V(a){var b=Array[t].slice[h](arguments,1);setTimeout(function(){return a[i](f,b)},1)}function W(a){throw new Error("Riloadr: "+a)}function X(b){a(b)}function Y(a){if(B.readyState==="complete")a();else{var b=function(){M(z,g,b),a()};L(z,g,b)}}"use strict";var b="on",c=!0,d=!1,e=250,f=null,g="load",h="call",i="apply",j="error",k="",l="length",m="scroll",n="resize",o=b+g,p=b+j,q="retries",r="riloaded",s="className",t="prototype",u="loadImages",v="orientation",w="EventListener",x="add"+w,y=v+"change",z=window,A,B=z.document,C=B.documentElement,D,E=/\?/,F=/{breakpoint-name}/gi,G=v in z&&b+y in z,H=z.screen.width,I=z.devicePixelRatio||1,J,K=Object[t].toString[h](z.operamini)==="[object OperaMini]",L,M,N;return C[s]=C[s].replace(/(^|\s)no-js(\s|$)/,"$1$2"),O.version="1.1.0",O[t].riload=function(){this[u](c)},!function(){var a=x in B,c=a?x:"attachEvent",e=a?"remove"+w:"detachEvent",f=a?k:b;L=function(a,b,e){a[c](f+b,e,d)},M=function(a,b,c){a[e](f+b,c,d)}}(),O});