/*! Riloadr.js 1.4.0 (c) 2013 Tubal Martin - MIT license */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):window.Riloadr=a(jQuery)}(function(a){"use strict";function gb(b){function tb(){ab=kb(),bb=hb(j,ab,L),gb=jb(j,bb[B]),qb=F&&G&&Ab(bb,nb.max)}function Ab(a,b){return a.name===b.name&&a[x]===b[x]&&a[y]===b[y]&&a[P]===b[P]&&a[D]===b[D]}function Bb(a,b){var c=+a[P]||1,d=+b[P]||1;return a=Math.max(+a[x]||0,+a[y]||0)*(cb>=c?c:1),b=Math.max(+b[x]||0,+b[y]||0)*(cb>=d?d:1),a>b}function Cb(a,b){if(wb(S,t,X),V&&(wb(S,r,W),_&&(fb=S[K],wb(S,O,Y)),z))for(b=0;a=z[b];)wb(T[M](a),r,W),b++}function Db(a,b){if(F||xb(S,t,X),V&&!F){if(xb(S,r,W),z)for(b=0;a=z[b];)xb(T[M](a),r,W),b++;_&&xb(S,O,Y)}}function Fb(a,b){a[w]=0,a[B]=g,a[u]=Gb,a[v]=Hb,a.src=lb(a,f,bb),Z.splice(b,1)}function Gb(){var a=this;a[u]=a[v]=i,a[A]&&(a[C]=a[C].replace(m,"$1$2")),V&&(a.style.visibility="visible"),u in b&&b[u][k](a),Ib()}function Hb(){var a=this;v in b&&b[v][k](a),N>a[w]?(a[w]++,a.src=lb(a,f,a[B]?gb:bb,d)):B in bb&&!a[B]?(a[w]=0,a[B]=d,a.src=lb(a,f,gb)):Ib()}function Ib(){$--,0==$&&(Db(),H in b&&b[H]())}var bb,db,gb,nb,ob,pb,qb,c=this,f=b.base||o,j=b.breakpoints||vb('"breakpoints" not defined.'),l=b.name||"responsive",m=RegExp("(^|\\s)"+l+"(\\s|$)"),n=b.defer&&("string"==typeof b.defer?{mode:b.defer,threshold:b.foldDistance,overflownElemsIds:[]}:b.defer),p=n&&n.mode.toLowerCase(),s=n&&n.threshold||100,z=n&&n.overflownElemsIds,E=b.watchViewportWidth,F=!!E,G="wider"==E,I="*"==E,L=b.ignoreLowBandwidth||g,N=b[w]||0,U=b.root||i,V=("invisible"==p||"belowfold"==p)&&!eb,W=V&&rb(function(){c[J]()},h),X=(V||F)&&sb(function(){F&&tb(),c[J](F)},h),Y=V&&sb(function(){S[K]!==fb&&(fb=S[K],c[J]())},h),Z=[],$=0;c[J]=function(b){ub(function(c,e){if(Z[q]&&b!==d||(b&&Cb(),F&&db&&(ob=!Ab(bb,db),pb=G&&Bb(bb,db)),a("img."+l,U).each(function(a,b){b&&!b[A]&&((!F||F&&(!db||G&&pb||I&&ob))&&(Z.push(b),$++),(!F||qb)&&(b[A]=d))}),qb&&(F=g),F&&(db=bb)),Z[q])for(e=0;c=Z[e];)c&&(!V||V&&mb(c,s))&&(Fb(c,e),e--),e++;c=i})},yb(function(){Q=a(S),R=T[e],U=U&&a("#"+U)||R,nb=F&&ib(j),tb(),(V||F)&&Cb(),!p||V?c[J]():zb(c[J])})}function hb(a,b,c){for(var g,h,i,j,d=b,e=0,f={};g=a[e];)h=g[x],i=g[y],j=g[P],b>0?(h&&i&&b>=h&&i>=b||h&&!i&&b>=h||i&&!h&&i>=b)&&(!j||j&&cb>=j&&(c||!c&&!db))&&(f=g):(0>=d||d>h||d>i)&&(d=h||i||d,f=g),e++;return f}function ib(a){for(var g,h,i,j,k,l,b=0,c=0,d=1/0,e={},f={};g=a[b];)j=+g[x]||0,k=+g[y]||0,l=+g[P]||1,cb>=l&&(j*=l,k*=l),h=j&&k&&Math.min(j,k)||j||k,i=j&&k&&Math.max(j,k)||k||j,d>h&&(d=h,e=g),i>c&&(c=i,f=g),b++;return{min:e,max:f}}function jb(a,b,c,d){if(typeof b==F)return{};for(d=0;c=a[d];){if(c.name==b)return c;d++}}function kb(){for(var f,a=Math,b=[U.clientWidth,U.offsetWidth,R.clientWidth],c=a.ceil(bb/cb),d=b[q],e=0;d>e;e++)isNaN(b[e])&&(b.splice(e,1),e--);return b[q]&&(f=a.max[l](a,b),isNaN(c)||(f=a.min(c,f))),f||c||0}function lb(a,b,c,d){var e=(a.getAttribute("data-base")||b)+(a.getAttribute("data-src")||o);return c[D]&&(e=e.split("."),e.pop(),e=e.join(".")+"."+c[D]),d&&(e+=(Z.test(e)?"&":"?")+"riloadrts="+(new Date).getTime()),e.replace($,c.name)}function db(){var a=S.navigator,b=a.connection||a.mozConnection||a.webkitConnection||a.oConnection||a.msConnection||{},c=b.type||"unknown",d=+b.bandwidth||1/0;return d>0&&.1>d||/^[23]g|3|4$/.test(c+o)}function mb(b,c){var d=a(b);return!(pb(d,c)||qb(d,c)||nb(d,c)||ob(d,c))}function nb(a,b){return Q[p]()+Q[G]()<=a[s]()[c]-b}function ob(a,b){return Q[G]()>=a[s]()[c]+b+a[p]()}function pb(a,b){return Q[n]()+Q[I]()<=a[s]()[f]-b}function qb(a,b){return Q[I]()>=a[s]()[f]+b+a[n]()}function rb(a,b){function h(){g=new Date,f=i,a[l](e,c)}var c,d,e,f,g=0;return function(){var i=new Date,j=b-(i-g);return c=arguments,e=this,0>=j?(g=i,d=a[l](e,c)):f||(f=tb(h,j)),d}}function sb(a,b,c){function h(){g=i,c||a[l](f,d)}var d,e,f,g;return function(){var i=c&&!g;return d=arguments,f=this,clearTimeout(g),g=tb(h,b),i&&(e=a[l](f,d)),e}}function tb(a,b){var c=Array[E].slice[k](arguments,2);return S.setTimeout(function(){return a[l](i,c)},b)}function ub(a){return tb[l](i,[a,1].concat(Array[E].slice[k](arguments,1)))}function vb(a){throw Error("Riloadr: "+a)}function wb(a,b,c){a[X](W+b,c,g)}function xb(a,b,c){a[Y](W+b,c,g)}function yb(b){a(b)}function zb(a){if(T.readyState===z)a();else{var b=function(){xb(S,j,b),a()};wb(S,j,b)}}var Q,R,ab,fb,b="on",c="top",d=!0,e="body",f="left",g=!1,h=250,i=null,j="load",k="call",l="apply",m="error",n="width",o="",p="height",q="length",r="scroll",s="offset",t="resize",u=b+j,v=b+m,w="retries",x="minWidth",y="maxWidth",z="complete",A="riloaded",B="fallback",C="className",D="imgFormat",E="prototype",F="undefined",G=r+"Top",H=b+z,I=r+"Left",J=j+"Images",K="orientation",L="EventListener",M="getElementById",N="add"+L,O=K+"change",P="minDevicePixelRatio",S=window,T=S.document,U=T.documentElement,V=N in T,W=V?o:b,X=V?N:"attachEvent",Y=V?"remove"+L:"detachEvent",Z=/\?/,$=/{breakpoint-name}/gi,_=K in S&&b+O in S,bb=S.screen[n],cb=S.devicePixelRatio||1,db=db(),eb="[object OperaMini]"===Object[E].toString[k](S.operamini);return U[C]=U[C].replace(/(^|\s)no-js(\s|$)/,"$1$2"),gb.version="1.4.0",gb[E].riload=function(){this[J](d)},gb});