/*! 
 * Riloadr.js 1.0.0 (c) 2012 Tubal Martin - MIT license
 */
!function(a){typeof define=="function"&&define.amd?define(a):window.Riloadr=a()}(function(){function Q(a){function cb(){t==="belowfold"?H?(N||(N=b,J(x,i,T(function(){W(i)},250))),X(i,f.loadImages),O||(O=b,J(x,j,U(function(){W(j)},250))),X(j,f.loadImages),C&&(P||(P=b,M=x[r],J(x,v,U(function(){x[r]!==M&&(M=x[r],W(v))},250))),X(v,f.loadImages)),f.loadImages()):Y(f.loadImages):t===e?Y(f.loadImages):f.loadImages()}function db(a){if(bb&&a!==b)return;!bb&&(bb=[]);var c=D&&_[u]("img."+n)||_.getElementsByTagName("img"),e=0,f=c[h],g;for(;e<f;e++)g=c[e],g&&!g[o]&&(D||g[p].indexOf(n)>=0)&&bb.push(g);c=g=d}function eb(a){a[o]=b,a[m]=0,a[k]=fb,a[l]=gb,a.src=hb(a)}function fb(){var b=this;b[k]=b[l]=d,b[p]=b[p].replace(q,"$1$2"),k in a&&a[k].call(b)}function gb(){var c=this;K>0&&c[m]<K&&(c[m]++,c.src=hb(c,b)),l in a&&a[l].call(c)}function hb(a,b){return(a.getAttribute("data-base")||s)+(a.getAttribute("data-"+ab)||g)+(b||$?"?":g)+(b?"t="+(new Date).getTime():g)+($?(b?"&":g)+"vwidth="+G+"&swidth="+E+"&dpr="+F:g)}function ib(a){bb.splice(a,1)}function jb(a){var b="clientHeight",c="clientTop",d=z[c]||A[c]||0,e=y.compatMode==="CSS1Compat"&&z[b]||A&&A[b]||z[b];return e<=a[w]().top-d-Q}var f=this,n=a.className||"responsive",q=new RegExp("(^|\\s)"+n+"(\\s|$)"),s=a.base||g,t=(a.defer+g).toLowerCase()||c,H=B&&t==="belowfold"&&!I,K=+a[m]||0,Q=+a.foldDistance||100,Z=a.breakpoints||c,$=!Z&&a.serverBreakpoints||c,_,ab,bb;f.loadImages=function(){var a=arguments;V(function(){db.apply(d,a);if(!bb[h])return;for(var b,c=0,e=bb[h];c<e;c++)b=bb[c],b&&!b[o]&&(H?jb(b)||(eb(b),ib(c),c--):(eb(b),ib(c),c--));b=d})},f.riload=function(){f.loadImages(b)},L(function(){A=y.body,_=a.parentNode||A,G=G||S(),ab=R(Z,G),cb()})}function R(a,b){if(!a)return"src";var c=g,e,f,h,i;for(e in a){f=d,h=a[e].minWidth,i=a[e].maxWidth;if(h&&i&&b>=h&&b<=i||h&&!i&&b>=h||i&&!h&&b<=i)f=e;f&&(c=f)}return c}function S(){var a=[z.clientWidth,z.offsetWidth,A.clientWidth],b=0,c=a[h];if(F>1)return Math.ceil(E/F);for(;b<c;b++)if(!isNaN(a[b]))return Math.ceil(a[b]);return E}function T(a,e){var f,g,h,i,j,k,l=U(function(){j=i=c},e);return function(){f=this,g=arguments;var c=function(){h=d,j&&a.apply(f,g),l()};return h||(h=setTimeout(c,e)),i?j=b:k=a.apply(f,g),l(),i=b,k}}function U(a,b,c){var e;return function(){var f=this,g=arguments,h=function(){e=d,c||a.apply(f,g)};c&&!e&&a.apply(f,g),clearTimeout(e),e=setTimeout(h,b)}}function V(a){var b=Array.prototype.slice.call(arguments,1);return setTimeout(function(){return a.apply(d,b)},1)}function W(a){var b=H[a],c,d;if(!b)return;for(c=0,d=b.length;c<d;c++)try{b[c]()}catch(e){}}function X(a,b){(H[a]||(H[a]=[])).push(b)}function Y(a){if(y[q]===n)a();else{var b=function(){K(x,e,b),a()};J(x,e,b)}}"use strict";var a="on",b=!0,c=!1,d=null,e="load",f="error",g="",h="length",i="scroll",j="resize",k=a+e,l=a+f,m="retries",n="complete",o="riloaded",p="className",q="readyState",r="orientation",s="EventListener",t="readystatechange",u="querySelectorAll",v=r+"change",w="getBoundingClientRect",x=window,y=x.document,z=y.documentElement,A,B=w in z,C=r in x&&a+v in x,D=u in y,E=x.screen.width,F=parseFloat(x.devicePixelRatio)||1,G,H={},I=Object.prototype.toString.call(x.operamini)==="[object OperaMini]",J,K,L,M,N,O,P;return!("Modernizr"in x)&&(z[p]=z[p].replace(/(^|\s)no-js(\s|$)/,"$1$2")),Q.prototype.version="1.0.0",!function(){var b="add"+s in y,d=b?"add"+s:"attachEvent",e=b?"remove"+s:"detachEvent",f=b?g:a;J=function(a,b,e){a[d](f+b,e,c)},K=function(a,b,d){a[e](f+b,d,c)}}(),L=function(){function l(a){if(j)return;if(!y.body)return V(l);j=b;while(a=i.shift())V(a)}function m(){if(j)return;try{z.doScroll("left")}catch(a){return V(m)}l()}var a="DOMContentLoaded",f="add"+s,g="attachEvent",h=c,i=[],j=c,k;if(y[q]===n)l();else{if(y[f])k=function(){K(y,a,k),l()},J(y,a,k);else if(y[g]){k=function(){y[q]===n&&(K(y,t,k),l())},J(y,t,k);try{h=x.frameElement==d}catch(o){}z.doScroll&&h&&m()}J(x,e,l)}return function(a){j?V(a):i.push(a)}}(),Q})