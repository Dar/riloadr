/*! 
 * Riloadr.js 1.1.0 (c) 2012 Tubal Martin - MIT license
 */
!function(a){typeof define=="function"&&define.amd?define(a):window.Riloadr=a()}(function(){function X(a){function L(){T(G,l,y),T(G,m,z),N&&(W=G[x],T(G,E,A))}function P(){U(G,l,y),U(G,m,z),N&&U(G,E,A)}function Q(a,c){a[r]=b,a[p]=0,a[n]=X,a[o]=fb,a.src=$(a,t,K),F.splice(c,1)}function X(){var b=this;b[n]=b[o]=e,b[s]=b[s].replace(q,"$1$2"),n in a&&a[n][g](b)}function fb(){var c=this;D>0&&c[p]<D&&(c[p]++,c.src=$(c,t,K,b)),o in a&&a[o][g](c)}var f=this,h=a.breakpoints||db('"breakpoints" not defined.'),i=a.name||"responsive",q=new RegExp("(^|\\s)"+i+"(\\s|$)"),t=a.base||j,u=a.defer&&(a.defer+j).toLowerCase()||c,w=M&&u==="belowfold"&&!S,y=w&&ab(function(){f[v]()},d),z=w&&bb(function(){f[v]()},d),A=w&&bb(function(){G[x]!==W&&(W=G[x],f[v]())},d),B=+a.foldDistance||100,D=+a[p]||0,F=[],I,K;f[v]=function(a){cb(function(c,d,f){if(!F[k]||a===b){w&&L(),c=O&&I[C]("img."+i)||I.getElementsByTagName("img"),f=0;while(d=c[f])d&&!d[r]&&(O||d[s].indexOf(i)>=0)&&F.push(d),f++}if(F[k]){f=0;while(d=F[f])d&&!d[r]&&(w?_(d,B)||(Q(d,f),f--):(Q(d,f),f--)),f++}w&&!F[k]&&P(),c=d=e})},V(function(){J=H.body,I=a.root&&H.getElementById(a.root)||J,R=R||Z(),K=Y(h,R),!u||w?f[v]():eb(f[v])})}function Y(a,b){var c=j,d=b,e=0,f,g,h,i,k;while(f=a[e]){g=f.name,h=f.minWidth,i=f.maxWidth,k=f.minDevicePixelRatio;if(b>0){if(h&&i&&b>=h&&b<=i||h&&!i&&b>=h||i&&!h&&b<=i)k?Q>=k&&(c=g):c=g}else if(d<=0||h<d||i<d)d=h||i||d,c=g;e++}return c+j}function Z(){var a=Math,b=[I.clientWidth,I.offsetWidth,J.clientWidth],c=a.ceil(P/Q),d=b[k],e=0,f;for(;e<d;e++)isNaN(b[e])&&(b.splice(e,1),e--);return b[k]&&(f=a.max[h](a,b),isNaN(c)||(f=a.min(c,f))),f||c||0}function $(a,b,c,d){var e=(a.getAttribute("data-base")||b)+(a.getAttribute("data-src")||j);return d&&(e+=(K.test(e)?"&":"?")+"riloadrts="+(new Date).getTime()),e.replace(L,c)}function _(a,b){var c=I[u]||J[u]||0,d=H.compatMode==="CSS1Compat"&&I[z]||J&&J[z]||I[z];return d<=a[F]().top-c-b}function ab(a,b){function j(){i=new Date,g=e,a[h](f,c)}var c,d,f,g,i=0;return function(){var e=new Date,k=b-(e-i);return c=arguments,f=this,k<=0?(i=e,d=a[h](f,c)):g||(g=setTimeout(j,k)),d}}function bb(a,b,c){function j(){i=e,c||a[h](g,d)}var d,f,g,i;return function(){var e=c&&!i;return d=arguments,g=this,clearTimeout(i),i=setTimeout(j,b),e&&(f=a[h](g,d)),f}}function cb(a){var b=Array[t].slice[g](arguments,1);setTimeout(function(){return a[h](e,b)},1)}function db(a){throw new Error("Riloadr: "+a)}function eb(a){if(H[w]===q)a();else{var b=function(){U(G,f,b),a()};T(G,f,b)}}"use strict";var a="on",b=!0,c=!1,d=250,e=null,f="load",g="call",h="apply",i="error",j="",k="length",l="scroll",m="resize",n=a+f,o=a+i,p="retries",q="complete",r="riloaded",s="className",t="prototype",u="clientTop",v="loadImages",w="readyState",x="orientation",y="attachEvent",z="clientHeight",A="EventListener",B="readystatechange",C="querySelectorAll",D="add"+A,E=x+"change",F="getBoundingClientRect",G=window,H=G.document,I=H.documentElement,J,K=/\?/,L=/{breakpoint-name}/gi,M=F in I,N=x in G&&a+E in G,O=C in H,P=G.screen.width,Q=G.devicePixelRatio||1,R,S=Object[t].toString[g](G.operamini)==="[object OperaMini]",T,U,V,W;return I[s]=I[s].replace(/(^|\s)no-js(\s|$)/,"$1$2"),X.version="1.1.0",X[t].riload=function(){this[v](b)},!function(){var b=D in H,d=b?D:y,e=b?"remove"+A:"detachEvent",f=b?j:a;T=function(a,b,e){a[d](f+b,e,c)},U=function(a,b,d){a[e](f+b,d,c)}}(),V=function(){function j(a){if(!h){if(!H.body)return cb(j);h=b;while(a=g.shift())cb(a)}}function k(){if(!h){try{I.doScroll("left")}catch(a){return cb(k)}j()}}var a="DOMContentLoaded",d=c,g=[],h=c,i;if(H[w]===q)j();else{if(H[D])i=function(){U(H,a,i),j()},T(H,a,i);else if(H[y]){i=function(){H[w]===q&&(U(H,B,i),j())},T(H,B,i);try{d=G.frameElement==e}catch(l){}I.doScroll&&d&&k()}T(G,f,j)}return function(a){h?cb(a):g.push(a)}}(),X});